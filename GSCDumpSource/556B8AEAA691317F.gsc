// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_62123C11D393EF66( reviver )
{
    self endon( "last_stand_finished" );
    self endon( "last_stand_heal_active" );
    level endon( "game_ended" );

    for (;;)
    {
        while ( !reviver isonground() )
            waitframe();

        scripts\mp\playerlogic::setbeingrevivedinternal( 1 );
        _id_22F7E2F7E3607528 = 0;
        self notify( "handle_revive_message" );
        reviver.revivingteammate = 1;

        if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
            _id_2CEDCC356F1B9FC8::setplayerbeingrevivedextrainfo( 1 );

        usetime = getdvarfloat( "dvar_AF65C14C83826CFA", scripts\mp\laststand::getdefaultlaststandrevivetimervalue() );
        wait( usetime );
        _id_22F7E2F7E3607528 = 1;
        reviver notify( "finish_buddy_reviving" );
        scripts\mp\playerlogic::setbeingrevivedinternal( 0 );
        _id_22F7E2F7E3607528 = scripts\mp\laststand::finishreviveplayer( "use_hold_revive_success", reviver );

        if ( _id_22F7E2F7E3607528 )
            return;
    }
}

_id_76CA0B3D8B2555CA( weaponobj )
{
    if ( !isdefined( weaponobj ) )
        return 0;

    return weaponobj.basename == "iw9_pi_stimpistol_mp";
}

_id_31AFE9D7B373900F()
{
    level endon( "game_ended" );
    self endon( "death_or_disconnect" );
    _id_19163E14365D9264 = scripts\mp\supers::getcurrentsuper();
    _id_19163E14365D9264.usestarttime = self._id_98D31D9CE04B2B81;
    waitframe();
    scripts\mp\supers::setsuperisinuse( 1 );
    scripts\mp\supers::_id_330825804EBBD918( 1 );
    waitframe();
    scripts\mp\supers::reducesuperusepercent( 1.0 );
    scripts\mp\supers::updatesuperuistate();
    _id_7E52B56769FA7774::superslotcleanup( self );
}

_id_807B3B0A3B4128F9()
{
    if ( isdefined( self._id_B24E609023CE8208 ) )
        self._id_B24E609023CE8208 = undefined;

    if ( isdefined( self._id_98D31D9CE04B2B81 ) )
        self._id_98D31D9CE04B2B81 = undefined;
}

_id_A35FFF2FF233592A()
{
    _id_D3C112E63BF53EE5 = scripts\mp\supers::getcurrentsuper();

    if ( !isdefined( _id_D3C112E63BF53EE5 ) )
        return 0;

    if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
        return _id_D3C112E63BF53EE5.staticdata.ref == "super_stimpistol";

    return _id_D3C112E63BF53EE5.staticdata.ref == "super_stimpistol" && scripts\mp\supers::issuperready();
}

_id_7FC69415FB24CAE1()
{
    self notify( "super_stimPistol_watchHits" );
    self endon( "super_stimPistol_watchHits" );
    self endon( "death_or_disconnect" );

    for (;;)
    {
        self waittill( "bullet_first_impact", _id_1D9FB21B4F3023F3, _id_B3FCD958F4D7876E, _id_5E8EDE0EF6D7F3AB, surfacetype, weapon, _id_F07322C0D6CA069C, _id_25DE37BAEC255643, hitloc );

        if ( isdefined( _id_1D9FB21B4F3023F3 ) )
            _id_8A99CEBBC265563E( _id_1D9FB21B4F3023F3, _id_25DE37BAEC255643, weapon );
    }
}

_id_8A99CEBBC265563E( _id_1D9FB21B4F3023F3, _id_25DE37BAEC255643, weapon )
{
    if ( !istrue( _id_76CA0B3D8B2555CA( weapon ) ) )
        return 0;

    if ( !istrue( isplayer( _id_1D9FB21B4F3023F3 ) || isagent( _id_1D9FB21B4F3023F3 ) ) )
        return 0;

    if ( _id_1D9FB21B4F3023F3.team != self.team )
        return 0;

    _id_B25CA392892D7A80 = _id_1D9FB21B4F3023F3 scripts\mp\teamrevive::_id_15933E1583288208();

    if ( isdefined( _id_B25CA392892D7A80 ) )
    {
        _id_B25CA392892D7A80._id_F99D56BCB582A8BA playsoundtoplayer( "weap_stimpistol_plr_hit_revive", _id_B25CA392892D7A80._id_F99D56BCB582A8BA );
        _id_B25CA392892D7A80._id_F99D56BCB582A8BA thread _id_ADA94A4D4DEECF34( _id_B25CA392892D7A80, self );
        _id_74B851B7AA1EF32D::_id_693D12AA2C1C02C5( 1, "superStimHeal" );
    }
    else if ( scripts\mp\utility\player::isinlaststand( _id_1D9FB21B4F3023F3 ) && !istrue( _id_1D9FB21B4F3023F3.beingrevived ) )
    {
        _id_1D9FB21B4F3023F3 playsoundtoplayer( "weap_stimpistol_plr_hit_revive", _id_1D9FB21B4F3023F3 );
        _id_1D9FB21B4F3023F3 thread _id_62123C11D393EF66( self );
        _id_74B851B7AA1EF32D::_id_693D12AA2C1C02C5( 1, "superStimHeal" );
    }
}

_id_ADA94A4D4DEECF34( _id_B25CA392892D7A80, reviver )
{
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );

    if ( isdefined( _id_B25CA392892D7A80.onbeginuse ) )
        _id_B25CA392892D7A80 [[ _id_B25CA392892D7A80.onbeginuse ]]( reviver, 0 );

    thread _id_02ED51B25DF0D7D8( reviver, _id_B25CA392892D7A80, _id_5ACB5DCA46088661() );
    reviver thread _id_2901549184BDC736( reviver, _id_B25CA392892D7A80, _id_5ACB5DCA46088661() );
    thread _id_5B9F43D57BFBADDF( _id_B25CA392892D7A80 );
    self waittill( "super_stim_revive_other_end" );

    if ( isdefined( _id_B25CA392892D7A80.onenduse ) )
        _id_B25CA392892D7A80 [[ _id_B25CA392892D7A80.onenduse ]]( reviver.team, reviver, 1, 0 );

    waitframe();

    if ( isdefined( _id_B25CA392892D7A80.onuse ) )
        _id_B25CA392892D7A80 [[ _id_B25CA392892D7A80.onuse ]]( reviver );
}

_id_5ACB5DCA46088661()
{
    return scripts\engine\utility::ter_op( isdefined( level._id_04B91C5DB6B16C58 ), level._id_04B91C5DB6B16C58, 5 );
}

_id_2901549184BDC736( reviver, _id_B25CA392892D7A80, _id_246AEE6688CC8EAE )
{
    self notify( "super_stimPistol_progressReviverUi" );
    self endon( "super_stimPistol_progressReviverUi" );
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );
    _id_48974A7856F3CBAA = 0;
    self setclientomnvar( "ui_securing", 5 );

    while ( _id_48974A7856F3CBAA < _id_246AEE6688CC8EAE )
    {
        _id_48974A7856F3CBAA = _id_48974A7856F3CBAA + level.framedurationseconds;
        self setclientomnvar( "ui_securing_progress", clamp( _id_48974A7856F3CBAA / _id_246AEE6688CC8EAE, 0.01, 1 ) );
        waitframe();
    }

    self setclientomnvar( "ui_securing", 0 );
}

_id_02ED51B25DF0D7D8( reviver, _id_B25CA392892D7A80, _id_246AEE6688CC8EAE )
{
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );
    _id_48974A7856F3CBAA = 0;
    self setclientomnvar( "ui_securing", 6 );
    self setclientomnvar( "ui_reviver_id", self getentitynumber() );

    while ( _id_48974A7856F3CBAA < _id_246AEE6688CC8EAE )
    {
        _id_48974A7856F3CBAA = _id_48974A7856F3CBAA + level.framedurationseconds;
        self setclientomnvar( "ui_securing_progress", clamp( _id_48974A7856F3CBAA / _id_246AEE6688CC8EAE, 0.01, 1 ) );
        waitframe();
    }

    self setclientomnvar( "ui_securing", 0 );
    self setclientomnvar( "ui_reviver_id", -1 );
    self notify( "super_stim_revive_other_end" );
}

_id_5B9F43D57BFBADDF( _id_B25CA392892D7A80, reviver )
{
    level endon( "game_ended" );
    self endon( "super_stim_revive_other_end" );
    _id_B25CA392892D7A80._id_F99D56BCB582A8BA scripts\engine\utility::waittill_any_4( "death_or_disconnect", "last_stand_finished", "trigger_removed", "team_eliminated" );

    if ( isdefined( _id_B25CA392892D7A80 ) && isdefined( _id_B25CA392892D7A80.onenduse ) )
        _id_B25CA392892D7A80 [[ _id_B25CA392892D7A80.onenduse ]]( reviver.team, reviver, 0, 0 );
}

_id_321C7891711E583F()
{
    thread _id_7FC69415FB24CAE1();
    _id_AD32396BD89936BB( 0 );
    return 1;
}

_id_F5037BA4A5399B63( _id_FCEF8D217A441961 )
{
    self notify( "super_stimPistol_watchHits" );
    _id_AD32396BD89936BB( 1 );
    self._id_BF5B10918F8418A1 = undefined;
    scripts\cp_mp\challenges::_id_BD59AA7E8CECE1AB( "super_stimpistol", 0 );
}

_id_3F29F7CEB8C0EC6D()
{
    self._id_B24E609023CE8208 = undefined;
    self._id_98D31D9CE04B2B81 = undefined;
}

_id_AD32396BD89936BB( _id_77C892C2CEC7A0EB )
{
    if ( !isdefined( _id_77C892C2CEC7A0EB ) )
        _id_77C892C2CEC7A0EB = 0;

    if ( _id_77C892C2CEC7A0EB )
        self enableweaponpickup();
    else
        self disableweaponpickup();
}

_id_D44B1FE27EE0494F()
{
    waittime = 10;
    thread _id_2CEDCC356F1B9FC8::playerplaygestureweaponanim( "iw9_vm_ges_stimpistol_dart_remove", waittime );
}
