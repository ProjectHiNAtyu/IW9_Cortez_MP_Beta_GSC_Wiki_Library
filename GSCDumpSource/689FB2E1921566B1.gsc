// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

initialize()
{
    _id_4D445CD9F16875C6 = getdvarint( "dvar_021B64E57D92863B", 0 );

    if ( !_id_4D445CD9F16875C6 )
        return;

    level._id_39CE876B557ED7FA = spawnstruct();
    level._id_39CE876B557ED7FA._id_EB38D4DADEF68670 = 0;
    level._id_39CE876B557ED7FA._id_6D3A3F51D84A3787 = getdvarint( "dvar_88668D5878DC96BC", 5 );
    level._id_39CE876B557ED7FA._id_D3EEC3EAC4C4BA7C = getdvarint( "dvar_E91662DA4B187AF8", 10 );
}

start()
{
    if ( !isdefined( level._id_39CE876B557ED7FA ) )
        return;

    _id_C2F71316C14ED46F();
    thread _id_5FDEEA57150E38B1();
    thread _id_451C5E363341E5D7();

    if ( level.gametype == "br" && !istrue( level.br_circle_disabled ) )
        thread _id_BE1047EA03D62CAD();
}

_id_033B1263DF867F43( _id_3C590B0EE220AFA3, _id_C978CB0E8E5AB65D )
{
    if ( !isdefined( level._id_39CE876B557ED7FA ) )
        return;

    _id_3C590B0EE220AFA3 = scripts\engine\utility::_id_53C4C53197386572( _id_3C590B0EE220AFA3, 0 );
    _id_C978CB0E8E5AB65D = scripts\engine\utility::_id_53C4C53197386572( _id_C978CB0E8E5AB65D, 0 );
    _id_6C2FE87A3F4D8BC7 = level.mapcorners[0].origin;
    _id_1996B8BC8D47D84F = level.mapcorners[1].origin;
    _id_DFC0BF2EB51E62C9 = ( _id_6C2FE87A3F4D8BC7[0], _id_1996B8BC8D47D84F[1], _id_3C590B0EE220AFA3 );
    _id_DF9DB12EB4F7FC47 = ( _id_1996B8BC8D47D84F[0], _id_6C2FE87A3F4D8BC7[1], _id_C978CB0E8E5AB65D );
    northyaw = getnorthyaw();
    x = cos( northyaw );
    y = sin( northyaw );
    _id_80E6C77F14F3B358 = 0.000000119209;

    if ( abs( x ) <= _id_80E6C77F14F3B358 )
        x = 0;

    if ( abs( y ) <= _id_80E6C77F14F3B358 )
        y = 0;

    _id_D1E567A2651B793F = _id_CD70B8FA232889F5( x, y );
    mapname = _id_905E60070F3E3CBF( level.script );
    _id_DB5DBABFBAFE0C94( "LoadMap", [ "name", mapname, "min", _id_DFC0BF2EB51E62C9, "max", _id_DF9DB12EB4F7FC47, "north", _id_D1E567A2651B793F ] );
}

_id_C2F71316C14ED46F()
{
    if ( isdefined( level.gulag ) && isdefined( level.gulag.arenas ) )
        _id_6E00E8FB18CD6169 = level.gulag.arenas.size;
    else
        _id_6E00E8FB18CD6169 = 0;

    _id_CA14E613E9BBB09A = _id_905E60070F3E3CBF( scripts\mp\utility\game::getsubgametype() );
    _id_DB5DBABFBAFE0C94( "GameStart", [ "gameType", _id_CA14E613E9BBB09A, "gulagNum", _id_6E00E8FB18CD6169 ] );
}

_id_5FDEEA57150E38B1()
{
    for (;;)
    {
        msg = scripts\engine\utility::waittill_any_return_no_endon_death_3( "start_prematch", "prematch_over", "game_ended" );

        if ( msg == "start_prematch" )
        {
            _id_DB5DBABFBAFE0C94( "PrematchStart" );
            continue;
        }

        if ( msg == "prematch_over" )
        {
            _id_DB5DBABFBAFE0C94( "PrematchEnd" );
            continue;
        }

        if ( msg == "game_ended" )
        {
            _id_DB5DBABFBAFE0C94( "GameEnd" );
            return;
        }
    }
}

_id_451C5E363341E5D7()
{
    level endon( "game_ended" );

    for (;;)
    {
        _id_5B234F9FF418F161 = [];

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < level.players.size; _id_AC0E594AC96AA3A8++ )
        {
            player = level.players[_id_AC0E594AC96AA3A8];

            if ( _id_40E63DD222434655::_id_DED80385EA7471DB( player ) && !player _id_40E63DD222434655::_id_A9CBF557DC66D201() && !player _id_23DDC5A3E0D509D3::_id_6ECC7CD453466014() )
            {
                _id_81A6DCF8641471F7 = _id_36932AA7F99CC334( player );
                str = "id=" + _id_81A6DCF8641471F7 + ";pos=" + player.origin;

                if ( player _id_2CEDCC356F1B9FC8::isplayerinorgoingtogulag() )
                    str = str + ( ";gulagId=" + player.arena.gulagindex );

                _id_5B234F9FF418F161[_id_5B234F9FF418F161.size] = str;
            }
        }

        if ( _id_5B234F9FF418F161.size > 0 )
            _id_10730F40A5C98AA9( "UpdatePlayerPos", _id_5B234F9FF418F161 );

        wait( level._id_39CE876B557ED7FA._id_6D3A3F51D84A3787 );
    }
}

_id_BE1047EA03D62CAD()
{
    level endon( "game_ended" );
    _id_61C7C88E85221081 = [ "br_circle_set", "br_circle_started", "br_circle_closed", "circle_paused", "circle_unpaused" ];

    for (;;)
    {
        msg = scripts\engine\utility::waittill_any_in_array_or_timeout( _id_61C7C88E85221081, level._id_39CE876B557ED7FA._id_D3EEC3EAC4C4BA7C );

        if ( !isdefined( level.br_circle ) )
            continue;

        _id_CE391B3E73AAD739();
    }
}

_id_CE391B3E73AAD739()
{
    circleindex = level.br_circle.circleindex;

    if ( !isdefined( circleindex ) || circleindex < 0 )
        return;

    _id_E681932897D7F299 = _id_2695A20D4011076D::getdangercircleorigin();
    _id_E681932897D7F299 = _id_CD70B8FA232889F5( _id_E681932897D7F299[0], _id_E681932897D7F299[1] );
    circleradius = _id_2695A20D4011076D::getdangercircleradius();
    targetpos = _id_2695A20D4011076D::getsafecircleorigin();
    targetpos = _id_CD70B8FA232889F5( targetpos[0], targetpos[1] );
    _id_154EF61B7A7F747A = _id_2695A20D4011076D::getsafecircleradius();
    _id_DB5DBABFBAFE0C94( "UpdateCircle", [ "id", circleindex, "pos", _id_E681932897D7F299, "radius", circleradius, "target_pos", targetpos, "target_radius", _id_154EF61B7A7F747A ] );
}

_id_A840FCCCBCF071C4( victim, attacker, meansofdeath, damage, hitloc )
{
    _id_C5D5711B66DA153E = [];
    _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "victim";
    _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = _id_36932AA7F99CC334( victim );

    if ( isdefined( attacker ) )
    {
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "attacker";
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = _id_36932AA7F99CC334( attacker );
    }

    if ( isdefined( meansofdeath ) )
    {
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "damageType";
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = _id_905E60070F3E3CBF( meansofdeath );
    }

    if ( isdefined( damage ) )
    {
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "damageValue";
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = damage;
    }

    if ( isdefined( hitloc ) )
    {
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "hitLoc";
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = _id_905E60070F3E3CBF( hitloc );
    }

    if ( victim.health <= 0 )
    {
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = "dead";
        _id_C5D5711B66DA153E[_id_C5D5711B66DA153E.size] = 1;
    }

    _id_DB5DBABFBAFE0C94( "DoDamage", _id_C5D5711B66DA153E );
}

_id_DB5DBABFBAFE0C94( type, _id_31FE7A6ADF854D98 )
{
    if ( !isdefined( level._id_39CE876B557ED7FA ) )
        return;

    level._id_39CE876B557ED7FA._id_EB38D4DADEF68670++;
    _id_73DB6DE3FCDAC953 = level._id_39CE876B557ED7FA._id_EB38D4DADEF68670;

    if ( !isdefined( _id_31FE7A6ADF854D98 ) || _id_31FE7A6ADF854D98.size == 0 )
        return _id_CFF273B02B090D55( type, "", _id_73DB6DE3FCDAC953 );

    _id_8A73A0E5B873C7CD = _id_2CFBE3D9B897E187( _id_31FE7A6ADF854D98 );
    _id_C92C78259FABCC48 = 1;

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_8A73A0E5B873C7CD.size; _id_AC0E594AC96AA3A8++ )
    {
        if ( _id_AC0E594AC96AA3A8 == _id_8A73A0E5B873C7CD.size - 1 )
            _id_C92C78259FABCC48 = 0;

        _id_CFF273B02B090D55( type, _id_8A73A0E5B873C7CD[_id_AC0E594AC96AA3A8], _id_73DB6DE3FCDAC953, _id_C92C78259FABCC48 );
    }
}

_id_10730F40A5C98AA9( type, _id_5B234F9FF418F161 )
{
    if ( !isdefined( level._id_39CE876B557ED7FA ) )
        return;

    level._id_39CE876B557ED7FA._id_EB38D4DADEF68670++;
    _id_73DB6DE3FCDAC953 = level._id_39CE876B557ED7FA._id_EB38D4DADEF68670;

    if ( !isdefined( _id_5B234F9FF418F161 ) || _id_5B234F9FF418F161.size == 0 )
        return _id_CFF273B02B090D55( type, "", _id_73DB6DE3FCDAC953 );

    _id_668A4BBDD722031B = "";

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_5B234F9FF418F161.size; _id_AC0E594AC96AA3A8++ )
    {
        if ( _id_668A4BBDD722031B.size + _id_5B234F9FF418F161[_id_AC0E594AC96AA3A8].size >= 2048 )
        {
            _id_CFF273B02B090D55( type, _id_668A4BBDD722031B, _id_73DB6DE3FCDAC953, 1 );
            _id_668A4BBDD722031B = "";
        }

        if ( _id_AC0E594AC96AA3A8 == _id_5B234F9FF418F161.size - 1 )
        {
            _id_668A4BBDD722031B = _id_668A4BBDD722031B + _id_5B234F9FF418F161[_id_AC0E594AC96AA3A8];
            continue;
        }

        _id_668A4BBDD722031B = _id_668A4BBDD722031B + ( _id_5B234F9FF418F161[_id_AC0E594AC96AA3A8] + "|" );
    }

    _id_CFF273B02B090D55( type, _id_668A4BBDD722031B + ";", _id_73DB6DE3FCDAC953 );
}

_id_CFF273B02B090D55( type, string, _id_73DB6DE3FCDAC953, _id_C92C78259FABCC48 )
{
    if ( isdefined( level._id_39CE876B557ED7FA ) )
    {
        _id_85DA9F739E923EF0 = " ";

        if ( istrue( _id_C92C78259FABCC48 ) )
            _id_85DA9F739E923EF0 = "/ ";

        logstring( "[REPLAY] " + _id_73DB6DE3FCDAC953 + _id_85DA9F739E923EF0 + type + " " + string );
    }
}

_id_2CFBE3D9B897E187( _id_31FE7A6ADF854D98 )
{
    _id_CBA40E031462D0A0 = [];

    if ( _id_31FE7A6ADF854D98.size == 0 )
        return _id_CBA40E031462D0A0;

    str = "";

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_31FE7A6ADF854D98.size; _id_AC0E594AC96AA3A8 = _id_AC0E594AC96AA3A8 + 2 )
    {
        key = _id_31FE7A6ADF854D98[_id_AC0E594AC96AA3A8];
        val = _id_31FE7A6ADF854D98[_id_AC0E594AC96AA3A8 + 1];

        if ( !isdefined( key ) )
            break;

        _id_27BC17B4B6DAC14F = "";

        if ( !isdefined( val ) )
            _id_27BC17B4B6DAC14F = "undefined";
        else if ( isint( val ) || isfloat( val ) || isvector( val ) )
            _id_27BC17B4B6DAC14F = "" + val;
        else if ( isstring( val ) )
            _id_27BC17B4B6DAC14F = val;
        else
        {

        }

        _id_21B0EA321183EFE8 = key + "=" + _id_27BC17B4B6DAC14F + ";";

        if ( str.size + _id_21B0EA321183EFE8.size >= 2048 )
        {
            _id_CBA40E031462D0A0[_id_CBA40E031462D0A0.size] = str;
            str = "";
        }

        str = str + _id_21B0EA321183EFE8;
    }

    _id_CBA40E031462D0A0[_id_CBA40E031462D0A0.size] = str;
    return _id_CBA40E031462D0A0;
}

_id_36932AA7F99CC334( player )
{
    _id_DEC9BCCE93873125 = "";

    if ( !isplayer( player ) )
        _id_DEC9BCCE93873125 = player.classname + ": ";
    else
        _id_DEC9BCCE93873125 = scripts\engine\utility::ter_op( isbot( player ), "b_", "h_" );

    id = scripts\engine\utility::_id_53C4C53197386572( player._id_87439F119EAA14E3, player getentitynumber() );
    _id_DF6EDF345D8E8653 = _id_905E60070F3E3CBF( _id_DEC9BCCE93873125 + id );
    return _id_DF6EDF345D8E8653;
}

_id_905E60070F3E3CBF( str )
{
    str = _id_10E35F6C482BD1B5( str );
    return "\"" + str + "\"";
}

_id_CD70B8FA232889F5( x, y )
{
    return "(" + x + ", " + y + ")";
}

_id_10E35F6C482BD1B5( string )
{
    if ( !_id_E57F486C5B28DD02( string ) )
        return string;

    result = "";

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < string.size; _id_AC0E594AC96AA3A8++ )
    {
        _id_B5517D24E9DC9A49 = string[_id_AC0E594AC96AA3A8];

        if ( !_id_9EA821C952E840A0( _id_B5517D24E9DC9A49 ) )
            result = result + _id_B5517D24E9DC9A49;
    }

    return result;
}

_id_E57F486C5B28DD02( string )
{
    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < string.size; _id_AC0E594AC96AA3A8++ )
    {
        _id_B5517D24E9DC9A49 = string[_id_AC0E594AC96AA3A8];

        if ( _id_9EA821C952E840A0( _id_B5517D24E9DC9A49 ) )
            return 1;
    }

    return 0;
}

_id_9EA821C952E840A0( _id_B5517D24E9DC9A49 )
{
    return _id_B5517D24E9DC9A49 == "|" || _id_B5517D24E9DC9A49 == ";" || _id_B5517D24E9DC9A49 == "\"";
}
