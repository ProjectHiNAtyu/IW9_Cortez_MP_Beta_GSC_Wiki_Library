// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    scripts\mp\utility\spawn_event_aggregator::registeronplayerspawncallback( ::onplayerspawned );
}

onplayerspawned()
{
    _id_8F267DCD3BA27FD6 = spawnstruct();
    _id_8F267DCD3BA27FD6.times = 0;
    _id_8F267DCD3BA27FD6._id_DD231658A9EE2BCA = -99999;
    self.focus = 0;
    thread _id_668D6646DE9F85E6( _id_8F267DCD3BA27FD6 );
}

_id_668D6646DE9F85E6( _id_8F267DCD3BA27FD6 )
{
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );
    _id_8F267DCD3BA27FD6 = 0;

    for (;;)
    {
        while ( !self isholdingbreath() )
            waitframe();

        _id_8F267DCD3BA27FD6 = _id_31801AB8533AE1D8( _id_8F267DCD3BA27FD6 );
    }
}

_id_31801AB8533AE1D8( _id_8F267DCD3BA27FD6 )
{
    _id_AD5AAFEFE9223C08 = _id_162C0857613001F8();

    if ( _id_AD5AAFEFE9223C08 )
    {
        _id_8F267DCD3BA27FD6++;

        if ( _id_8E5BCDE8D8FE461A() )
            childthread _id_A85F5C6DC04397E4();

        self.focus = 1;
    }

    while ( self isholdingbreath() )
        waitframe();

    if ( _id_AD5AAFEFE9223C08 )
    {
        self notify( "focus_visionset_stop" );
        self.focus = 0;
        scripts\mp\utility\player::restorebasevisionset( 0.35 );
    }

    return _id_8F267DCD3BA27FD6;
}

_id_162C0857613001F8()
{
    _id_044FF9A09857A97B = [ "iw9_ar", "iw9_pi", "iw9_lm", "iw9_br", "iw9_sm", "iw9_dm", "iw9_sn", "iw9_sh" ];

    foreach ( _id_DE8A45DD2BF968EC in _id_044FF9A09857A97B )
    {
        if ( issubstr( self.currentweapon.basename, _id_DE8A45DD2BF968EC ) )
            return 1;
    }

    _id_044FF9A09857A97B = [ "t10_ar", "t10_pi", "t10_lm", "t10_br", "t10_sm", "t10_dm", "t10_sn", "t10_sh" ];

    foreach ( _id_DE8A45DD2BF968EC in _id_044FF9A09857A97B )
    {
        if ( issubstr( self.currentweapon.basename, _id_DE8A45DD2BF968EC ) )
            return 1;
    }

    return 0;
}

_id_A85F5C6DC04397E4()
{
    self endon( "focus_visionset_stop" );
    self visionsetnakedforplayer( "focus", 0.57 );
}

_id_8E5BCDE8D8FE461A()
{
    if ( istrue( level.wpinprogress ) )
        return 0;

    return 1;
}
