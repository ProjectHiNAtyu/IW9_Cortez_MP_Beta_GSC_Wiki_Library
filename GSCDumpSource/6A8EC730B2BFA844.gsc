// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    scripts\cp_mp\utility\script_utility::registersharedfunc( "pmc_missions", "onVehicleOutOfFuel", ::_id_0DA557960C6878E1 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "pmc_missions", "onUAVTowerUsed", ::_id_21EF4EB1AA52F430 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "pmc_missions", "onVehicleEnter", ::_id_5354B59BEDC18F02 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "pmc_missions", "onPingContractPhone", ::_id_5B7B312AF46D6E96 );
    level scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( ::luinotifylistener );
    _id_2342B8AAD723994E::registeronplayerjoinsquadcallback( ::_id_B944A4D927F9C28A );
    _id_2342B8AAD723994E::_id_A99987C7BF114DA4( ::_id_B944A4D927F9C28A );
    initteamdatafields();
    _id_48814951E916AF89::_id_93ADD0B65DB9F722( ::_id_AFF49E563A741F1E );
}

initteamdatafields()
{
    foreach ( team in level.teamnamelist )
    {
        level.teamdata[team]["poisVisited"] = [];
        level.teamdata[team]["vehiclesEntered"] = [];
    }
}

_id_CFF2F4F168B29B81()
{
    if ( !isdefined( level._id_B2729F28A675BE79 ) )
        level._id_B2729F28A675BE79 = getdvarint( "dvar_5A8C71E376F35349", 1 );

    return level._id_B2729F28A675BE79;
}

_id_47F721114FED37E7( player, _id_373249E63DD9730B )
{
    return player getplayerdata( level.loadoutsgroup, "squadMembers", "activePMCMissions", _id_373249E63DD9730B, "challengeID" );
}

_id_7159CEB842152778( player, _id_373249E63DD9730B )
{
    return player getplayerdata( level.loadoutsgroup, "squadMembers", "activePMCMissions", _id_373249E63DD9730B, "challengeProgress" );
}

_id_B944A4D927F9C28A( player )
{
    players = scripts\mp\utility\teams::getteamdata( player.team, "players" );
    _id_14CEE82314AC28CD = [];
    _id_A0F0FC2F7FF8F287 = [];

    foreach ( _id_736D8D9188CCBD45 in players )
    {
        for ( _id_373249E63DD9730B = 0; _id_373249E63DD9730B < 3; _id_373249E63DD9730B++ )
        {
            _id_804E08EA07743095 = _id_736D8D9188CCBD45._id_3F78C6A0862F9E25;

            if ( !isdefined( _id_14CEE82314AC28CD[_id_804E08EA07743095] ) )
            {
                _id_14CEE82314AC28CD[_id_804E08EA07743095] = [];
                _id_A0F0FC2F7FF8F287[_id_804E08EA07743095] = [];
            }

            _id_A61C75B156FC1EE0 = _id_14CEE82314AC28CD[_id_804E08EA07743095].size;
            _id_14CEE82314AC28CD[_id_804E08EA07743095][_id_A61C75B156FC1EE0] = _id_47F721114FED37E7( _id_736D8D9188CCBD45, _id_373249E63DD9730B );
            _id_A0F0FC2F7FF8F287[_id_804E08EA07743095][_id_A61C75B156FC1EE0] = _id_7159CEB842152778( _id_736D8D9188CCBD45, _id_373249E63DD9730B );
        }
    }

    foreach ( _id_736D8D9188CCBD45 in players )
    {
        for ( _id_804E08EA07743095 = 0; _id_804E08EA07743095 < 6; _id_804E08EA07743095++ )
        {
            _id_37CE0ED43BBBDA16 = 0;

            if ( isdefined( _id_14CEE82314AC28CD[_id_804E08EA07743095] ) && isdefined( _id_A0F0FC2F7FF8F287[_id_804E08EA07743095] ) )
            {
                for ( _id_37CE0ED43BBBDA16 = 0; _id_37CE0ED43BBBDA16 < min( _id_14CEE82314AC28CD[_id_804E08EA07743095].size, 3 ); _id_37CE0ED43BBBDA16++ )
                {
                    _id_736D8D9188CCBD45 setplayerdata( level._id_5D69837CF4DB0407, "squadPMCMissionGroups", _id_804E08EA07743095, "missions", _id_37CE0ED43BBBDA16, "challengeID", _id_14CEE82314AC28CD[_id_804E08EA07743095][_id_37CE0ED43BBBDA16] );
                    _id_736D8D9188CCBD45 setplayerdata( level._id_5D69837CF4DB0407, "squadPMCMissionGroups", _id_804E08EA07743095, "missions", _id_37CE0ED43BBBDA16, "challengeProgress", _id_A0F0FC2F7FF8F287[_id_804E08EA07743095][_id_37CE0ED43BBBDA16] );
                }
            }

            while ( _id_37CE0ED43BBBDA16 < 3 )
            {
                _id_736D8D9188CCBD45 setplayerdata( level._id_5D69837CF4DB0407, "squadPMCMissionGroups", _id_804E08EA07743095, "missions", _id_37CE0ED43BBBDA16, "challengeID", 0 );
                _id_736D8D9188CCBD45 setplayerdata( level._id_5D69837CF4DB0407, "squadPMCMissionGroups", _id_804E08EA07743095, "missions", _id_37CE0ED43BBBDA16, "challengeProgress", 0 );
                _id_37CE0ED43BBBDA16++;
            }
        }
    }
}

luinotifylistener( _id_EA3E3B2121E6713A, value )
{
    if ( isdefined( _id_EA3E3B2121E6713A ) )
    {
        switch ( _id_EA3E3B2121E6713A )
        {
            case "update_pmc_mission_data":
                _id_B944A4D927F9C28A( self );
                break;
        }
    }
}

_id_6F6CC16C0528DE5B( player )
{
    return player scripts\cp_mp\challenges::challengesenabledforplayer() && _id_CFF2F4F168B29B81();
}

_id_3172B1344F4E08A0( player, _id_414B281CD48C16D3, _id_EBD34E72023FC5A9, _id_52C67624A2BB680E )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_3EAA9F644DBE7834 = 0;
    _id_3EAA9F644DBE7834 = scripts\cp_mp\challenges::_id_6D40F12A09494350( _id_3EAA9F644DBE7834, 5 );
    items = scripts\engine\utility::array_combine( _id_414B281CD48C16D3, _id_EBD34E72023FC5A9 );
    _id_BAECEEC743D9A737( player, items, _id_52C67624A2BB680E, _id_3EAA9F644DBE7834 );

    if ( _id_EBD34E72023FC5A9.size == _id_2D9D24F7C63AC143::_id_B13E35608B336D65( player ) + 1 )
        _id_8359CADD253F9604( player, "full_backpack_extract", 1 );
}

_id_BAECEEC743D9A737( player, items, _id_52C67624A2BB680E, _id_3EAA9F644DBE7834 )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_A95035097821E2D1 = [];
    _id_2A1283E22F4E4AA8 = 0;
    _id_3EAA9F644DBE7834 = scripts\cp_mp\challenges::_id_6D40F12A09494350( _id_3EAA9F644DBE7834, 1 );

    foreach ( item in items )
    {
        ref = _id_600B944A95C3A7BF::_id_793E8A72CEDB8EF3( item.lootid );
        _id_25978461C6E4F61B = level.br_pickups._id_838863C4848D4C26[ref];
        itemtype = undefined;

        if ( isdefined( _id_25978461C6E4F61B ) )
            itemtype = level.br_pickups.br_itemtype[_id_25978461C6E4F61B];

        quantity = item.quantity;

        if ( !isdefined( item.quantity ) )
            quantity = 1;

        scripts\cp_mp\challenges::_id_D24138B32084FC3E( player, item.lootid, undefined, _id_3EAA9F644DBE7834, quantity );

        if ( isdefined( itemtype ) && ( itemtype == "lethal" || itemtype == "tactical" ) )
        {
            if ( !isdefined( _id_A95035097821E2D1[ref] ) )
            {
                _id_8359CADD253F9604( player, "unique_grenade_extract", quantity );
                _id_A95035097821E2D1[ref] = 1;
            }
        }
    }

    scripts\cp_mp\challenges::_id_D24138B32084FC3E( player, 200047, undefined, _id_3EAA9F644DBE7834, _id_52C67624A2BB680E * 100 );
}

_id_68D841F5BC2DD2B6( player, _id_B038ED928EC17A81 )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "loot_cache", 1 );
}

_id_2CA88164CB0A0965( player, _id_B205D90302DA2F07 )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_B23DDA83A49CD36E = scripts\mp\utility\teams::getteamdata( player.team, "poisVisited" );

    if ( !isdefined( _id_B23DDA83A49CD36E[_id_B205D90302DA2F07] ) )
    {
        _id_8359CADD253F9604( player, "poi_travel", 1 );
        _id_B23DDA83A49CD36E[_id_B205D90302DA2F07] = 1;
        scripts\mp\utility\teams::setteamdata( player.team, "poisVisited", _id_B23DDA83A49CD36E );
    }
}

_id_5354B59BEDC18F02( player, vehiclename )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_1423302F659C7767 = scripts\mp\utility\teams::getteamdata( player.team, "vehiclesEntered" );

    if ( !isdefined( _id_1423302F659C7767[vehiclename] ) )
    {
        _id_8359CADD253F9604( player, "unique_vehicle_pilot", 1 );
        _id_1423302F659C7767[vehiclename] = 1;
        scripts\mp\utility\teams::setteamdata( player.team, "vehiclesEntered", _id_1423302F659C7767 );
    }
}

_id_0DA557960C6878E1( player )
{
    if ( !isdefined( player ) || !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "gas_drain", 1 );
}

_id_84B7ABF2BB7C9ADD( _id_2E0BDB36F81A37E4 )
{
    _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( _id_2E0BDB36F81A37E4, "players" );

    if ( _id_E2B2BBD9E6539F11.size == 0 )
        return;

    player = _id_E2B2BBD9E6539F11[0];

    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "sam_site_captured", 1 );
    return;
}

_id_63FEDB7F004DA23B( attackers )
{
    if ( !_id_CFF2F4F168B29B81() )
        return;

    _id_42F8055B028EA2E0 = [];

    foreach ( attacker in attackers )
    {
        if ( !isdefined( _id_42F8055B028EA2E0[attacker.team] ) )
        {
            _id_42F8055B028EA2E0[attacker.team] = 1;
            _id_8359CADD253F9604( attacker, "squad_wipe", 1 );
        }
    }
}

_id_5B7B312AF46D6E96( player )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "ping_contract_phone", 1 );
}

_id_5CD237F20DEAA63F( player, ref )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "start_contract", 1 );
}

_id_5ED046E4372A2B16( player, ref )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    switch ( ref )
    {
        case "dmz_elimination":
            _id_8359CADD253F9604( player, "elimination_task", 1 );
            break;
        case "dmz_hunt":
            _id_8359CADD253F9604( player, "hunt_task", 1 );
            break;
    }
}

_id_59FE5E0D7D5E7947( player, _id_276AC5E84835EA87 )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "clear_stronghold", 1 );
}

_id_21EF4EB1AA52F430( player, index )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    if ( !isdefined( player._id_9CD3A5A67FCD8A9A ) )
        player._id_9CD3A5A67FCD8A9A = [];

    if ( !istrue( player._id_9CD3A5A67FCD8A9A[index] ) )
    {
        _id_8359CADD253F9604( player, "uav_tower", 1 );
        player._id_9CD3A5A67FCD8A9A[index] = 1;
    }
}

_id_3D12FCE128D424B1( player, instance )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    _id_8359CADD253F9604( player, "agent_radio_used", 1 );
}

_id_AFF49E563A741F1E( victim, player, objweapon )
{
    if ( !_id_6F6CC16C0528DE5B( player ) )
        return;

    weaponclass = weaponclass( objweapon );

    if ( weaponclass == "spread" && isdefined( player._id_DA28916E7827AF7C ) && player._id_DA28916E7827AF7C == "saba_hydro" )
        _id_8359CADD253F9604( player, "hydro_shotgun_ai", 1 );
    else if ( weaponclass == "rifle" && isdefined( player._id_DA28916E7827AF7C ) && player._id_DA28916E7827AF7C == "saba_oilfield" )
        _id_8359CADD253F9604( player, "oilfield_sniper_ai", 1 );

    if ( isdefined( level._id_A68DCD3B5A82712D ) )
    {
        foreach ( struct in level._id_A68DCD3B5A82712D )
        {
            dist = distance2d( struct.origin, victim.origin );

            if ( dist <= struct.radius )
                _id_8359CADD253F9604( player, "killed_under_agent_radio", 1 );
        }
    }
}

_id_8359CADD253F9604( player, type, quantity )
{
    gametype = scripts\cp_mp\challenges::_id_17C5D7FEB226E256();
    typeid = _func_96B7FC7E35353254( type );
    _id_DA28916E7827AF7C = 0;

    if ( isdefined( player._id_DA28916E7827AF7C ) )
        _id_DA28916E7827AF7C = _func_96B7FC7E35353254( player._id_DA28916E7827AF7C );

    scripts\cp_mp\challenges::_id_8359CADD253F9604( player, typeid, gametype, quantity, _id_DA28916E7827AF7C );

    if ( scripts\cp_mp\challenges::_id_5C7E8BCDC167FD84() )
    {
        players = scripts\mp\utility\teams::getteamdata( player.team, "players" );

        foreach ( _id_736D8D9188CCBD45 in players )
        {
            if ( _id_736D8D9188CCBD45 != player )
                scripts\cp_mp\challenges::_id_8359CADD253F9604( _id_736D8D9188CCBD45, typeid, gametype, quantity, _id_DA28916E7827AF7C, 1 );
        }
    }
}
